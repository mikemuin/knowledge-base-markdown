# Issue #1: Initialize Laravel Project and Configure Environment

## Local Machine Setup Guide

This guide will walk you through completing Issue #1 on your local machine step-by-step.

------

## Prerequisites

Before starting, ensure you have:

- Herd.app installed and running
- PHP 8.1 or higher
- Composer installed
- Git installed

------

## Step-by-Step Instructions

### Step 1: Navigate to Your Projects Directory

Open your terminal and navigate to where you want to create the project:

```bash
cd ~/Herd
# or wherever you keep your Herd projects
```

### Step 2: Clone the Repository

```bash
git clone https://github.com/muin-projects/domain-tracker.git
cd domain-tracker
```

### Step 3: Create a New Branch for This Issue

```bash
git checkout -b feature/issue-1-laravel-setup
```

### Step 4: Install Laravel

Since the repository is empty (except for docs), we need to install Laravel fresh:

```bash
# Remove any existing files except .git, docs, README.md, .gitignore, CONTRIBUTING.md, .env.example
# Keep the documentation we already created

# Install Laravel in a temporary directory
cd ..
composer create-project laravel/laravel domain-tracker-temp

# Move Laravel files to our repo (excluding .git)
cd domain-tracker-temp
cp -r * ../domain-tracker/
cp .env.example ../domain-tracker/
cp .gitignore ../domain-tracker/.gitignore-laravel

# Go back to our repo
cd ../domain-tracker

# Merge .gitignore files (our custom one is better, but check Laravel's for any missing items)
# Keep our .gitignore as it already has Laravel-specific rules

# Clean up temp directory
cd ..
rm -rf domain-tracker-temp
cd domain-tracker
```

**Alternative Simpler Method:**

```bash
# If you want to start completely fresh with Laravel
# Backup your docs first
mkdir ../domain-tracker-backup
cp -r docs ../domain-tracker-backup/
cp README.md ../domain-tracker-backup/
cp CONTRIBUTING.md ../domain-tracker-backup/
cp .env.example ../domain-tracker-backup/
cp .gitignore ../domain-tracker-backup/

# Install Laravel fresh
cd ..
composer create-project laravel/laravel domain-tracker-new
cd domain-tracker-new

# Restore our documentation
cp -r ../domain-tracker-backup/docs ./
cp ../domain-tracker-backup/README.md ./
cp ../domain-tracker-backup/CONTRIBUTING.md ./
cp ../domain-tracker-backup/.env.example ./
cp ../domain-tracker-backup/.gitignore ./

# Update git remote
git remote add origin https://github.com/muin-projects/domain-tracker.git

# Clean up
rm -rf ../domain-tracker-backup
```

### Step 5: Install Dependencies

```bash
composer install
```

### Step 6: Configure Environment File

```bash
# Copy the environment file
cp .env.example .env

# Generate application key
php artisan key:generate
```

### Step 7: Update .env for SQLite

Open `.env` in your editor and update these lines:

```env
APP_NAME="Domain Tracker"
APP_ENV=local
APP_KEY=base64:xxxxx  # This was generated by php artisan key:generate
APP_DEBUG=true
APP_TIMEZONE=UTC
APP_URL=http://domain-tracker.test  # Adjust based on your Herd setup

# Database Configuration
DB_CONNECTION=sqlite
# Comment out or remove these MySQL lines:
# DB_HOST=127.0.0.1
# DB_PORT=3306
# DB_DATABASE=laravel
# DB_USERNAME=root
# DB_PASSWORD=

# Session Configuration
SESSION_DRIVER=database
SESSION_LIFETIME=120

# Cache Configuration
CACHE_STORE=database

# Queue Configuration
QUEUE_CONNECTION=database
```

### Step 8: Create SQLite Database

```bash
# Create the database directory if it doesn't exist
mkdir -p database

# Create the SQLite database file
touch database/database.sqlite

# Verify the file was created
ls -la database/database.sqlite
```

### Step 9: Update Database Configuration

The default `config/database.php` should already be configured for SQLite, but verify:

```bash
# Check the SQLite configuration
cat config/database.php | grep -A 10 "'sqlite'"
```

It should show:

```php
'sqlite' => [
    'driver' => 'sqlite',
    'url' => env('DB_URL'),
    'database' => env('DB_DATABASE', database_path('database.sqlite')),
    'prefix' => '',
    'foreign_key_constraints' => env('DB_FOREIGN_KEYS', true),
    'busy_timeout' => null,
    'journal_mode' => null,
    'synchronous' => null,
],
```

### Step 10: Test Database Connection

```bash
# Run migrations to test the database connection
php artisan migrate

# You should see output like:
# Migration table created successfully.
# Migrating: ...
# Migrated: ...
```

### Step 11: Configure Herd.app

If using Herd.app, it should automatically detect your project. Verify:

1. Open Herd.app
2. Check that `domain-tracker` appears in your sites list
3. The URL should be something like: `http://domain-tracker.test`

**If not automatically detected:**

```bash
# Link the site manually (if needed)
herd link domain-tracker

# Or use the Herd GUI to add the site
```

### Step 12: Test the Application

Open your browser and navigate to:

```
http://domain-tracker.test
```

You should see the default Laravel welcome page.

**If you see errors:**

```bash
# Check Herd status
herd status

# Check PHP version
php -v

# Restart Herd services
herd restart
```

### Step 13: Verify Everything Works

Run these commands to ensure everything is set up correctly:

```bash
# Check Laravel version
php artisan --version

# Test database connection
php artisan tinker
>>> DB::connection()->getPdo();
>>> exit

# Check if the app runs
php artisan serve
# Visit http://127.0.0.1:8000 in browser (if not using Herd)
# Press Ctrl+C to stop
```

### Step 14: Commit Your Changes

```bash
# Check what files have changed
git status

# Stage all Laravel files
git add .

# Commit with a descriptive message
git commit -m "feat: Initialize Laravel project with SQLite configuration

- Install Laravel latest version
- Configure SQLite database connection
- Set DB_CONNECTION=sqlite in .env
- Create database/database.sqlite file
- Test database connection with migrations
- Configure app to run on Herd.app

Closes #1"

# Push to GitHub
git push origin feature/issue-1-laravel-setup
```

### Step 15: Create Pull Request

1. Go to https://github.com/muin-projects/domain-tracker

2. Click "Compare & pull request" for your branch

3. Fill in the PR details:

   - Title: `feat: Initialize Laravel Project and Configure Environment`

   - Description:

     ```markdown
     ## Changes- Installed Laravel latest stable version- Configured SQLite database connection- Created database file- Tested database connectivity- Verified application runs on Herd.app## Testing- [x] Laravel welcome page loads successfully- [x] SQLite database connection works- [x] Migrations run without errors- [x] Application accessible via Herd.appCloses #1
     ```

4. Click "Create pull request"

------

## Acceptance Criteria Checklist

Before marking this issue complete, verify:

- [x] Laravel project runs successfully on Herd.app
- [x] SQLite database connection works
- [x] Default Laravel welcome page displays
- [x] `.env` configured with `DB_CONNECTION=sqlite`
- [x] `database/database.sqlite` file exists
- [x] Migrations run successfully
- [x] Application is accessible via browser

------

## Troubleshooting

### Issue: "Database file not found"

**Solution:**

```bash
touch database/database.sqlite
php artisan migrate:fresh
```

### Issue: "Permission denied" on database file

**Solution:**

```bash
chmod 664 database/database.sqlite
chmod 775 database
```

### Issue: Herd.app not detecting the site

**Solution:**

```bash
# Try manually linking
herd link domain-tracker

# Or restart Herd
herd restart
```

### Issue: "Base table or view not found"

**Solution:**

```bash
# Clear cache and config
php artisan config:clear
php artisan cache:clear
php artisan migrate:fresh
```

### Issue: Cannot connect to database

**Solution:**

```bash
# Verify .env settings
cat .env | grep DB_

# Make sure DB_CONNECTION is set to sqlite
# Make sure no other DB_ variables are interfering

# Test connection
php artisan tinker
>>> DB::connection()->getDatabaseName()
```

------

## Notes

- Keep all the existing documentation files (README.md, CONTRIBUTING.md, docs/)
- The `.env.example` we created has the SQLite configuration already
- Herd.app automatically manages PHP and web server, so no need to configure Apache/Nginx
- The database file should be in `database/database.sqlite` (this is gitignored)

------

## Useful Commands Reference

```bash
# Laravel Artisan Commands
php artisan --version          # Check Laravel version
php artisan list              # List all available commands
php artisan migrate           # Run migrations
php artisan migrate:fresh     # Drop all tables and re-migrate
php artisan config:clear      # Clear config cache
php artisan cache:clear       # Clear application cache
php artisan serve             # Start dev server (if not using Herd)

# Composer Commands
composer install              # Install dependencies
composer update               # Update dependencies
composer dump-autoload        # Regenerate autoload files

# Git Commands
git status                    # Check status
git add .                     # Stage all changes
git commit -m "message"       # Commit changes
git push origin branch-name   # Push to GitHub
git log --oneline            # View commit history

# Herd Commands
herd list                     # List all sites
herd link                     # Link current directory
herd unlink                   # Unlink current directory
herd restart                  # Restart Herd services
herd status                   # Check Herd status
```

------

## ‚è±Estimated Time

**Total Time**: 30-45 minutes

- Setup and installation: 15-20 minutes
- Configuration: 10-15 minutes
- Testing and verification: 5-10 minutes

------

## Next Steps

After completing Issue #1:

1. **Merge your PR** after review
2. **Move to Issue #2**: Install and Configure Bootstrap 5
3. **Update the issue** to "Closed" on GitHub

------

**Good luck! üöÄ**

*Last updated: November 19, 2025*